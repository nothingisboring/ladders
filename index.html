<!DOCTYPE html>
<html>
<head>
    <title>LADDERS | Daily Ranking</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root { --correct: #6aaa64; --wrong: #ce3a3a; --border: #e2e2e2; --text: #000; --bg: #fff; }
        body { font-family: 'Helvetica Neue', Arial, sans-serif; background: var(--bg); color: var(--text); display: flex; flex-direction: column; align-items: center; padding: 20px; margin: 0; }
        
        header { width: 100%; max-width: 500px; border-bottom: 1px solid var(--border); padding: 10px 0; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-weight: 800; font-size: 24px; letter-spacing: -1.5px; }
        .stats-container { display: flex; gap: 20px; text-align: center; }
        .stat-item { font-size: 10px; font-weight: 800; color: #888; line-height: 1.2; }
        .stat-item span { font-size: 16px; color: #000; }

        .theme-box { text-align: center; margin-bottom: 25px; max-width: 400px; }
        .theme-box h2 { margin: 0; font-size: 18px; text-transform: uppercase; letter-spacing: 1px; }
        .peek-status { font-size: 12px; margin-top: 5px; color: #666; font-weight: bold; }

        #sortable-list { list-style: none; padding: 0; width: 100%; max-width: 450px; border-top: 1px solid var(--border); }
        .item { 
            display: flex; align-items: center; padding: 14px 12px; background: #fff; 
            border-bottom: 1px solid var(--border); position: relative; cursor: grab; user-select: none;
            overflow: hidden;
        }
        .item.dragging { background: #f9f9f9; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        .color-bar { position: absolute; left: 0; top: 0; bottom: 0; width: 0%; transition: width 0.4s ease-out; z-index: 1; opacity: 0; }
        .item.peeked .color-bar, .item.solved .color-bar { width: 100%; opacity: 1; }
        
        .text-container { position: relative; z-index: 2; display: flex; width: 100%; align-items: center; }
        .name { font-weight: 500; font-size: 14px; }
        .peek-btn { margin-left: auto; background: #000; color: #fff; border: none; padding: 4px 10px; font-size: 10px; font-weight: bold; border-radius: 4px; cursor: pointer; }
        
        .val-hint { margin-left: auto; font-size: 11px; font-weight: bold; display: none; background: rgba(0,0,0,0.8); color: #fff; padding: 2px 6px; border-radius: 3px; }

        .controls { margin-top: 30px; display: flex; flex-direction: column; gap: 10px; width: 100%; max-width: 450px; }
        button.action-btn { padding: 16px; border-radius: 30px; border: none; font-weight: bold; cursor: pointer; font-size: 16px; }
        #submitBtn { background: #000; color: #fff; }
        #masterBtn { background: #fff; color: #000; border: 2px solid #000; display: none; }
        #shareBtn { background: var(--correct); color: #fff; display: none; }
        #puzzle-hint {
    font-style: italic;
    letter-spacing: 0.5px;
    background: #f9f9f9;
    display: inline-block;
    padding: 2px 10px;
    border-radius: 4px;
}    
    </style>
</head>
<body>

    <header>
        <div class="logo">LADDERS</div>
        <div class="stats-container">
            <div class="stat-item"><span id="streak-count">0</span><br>STREAK</div>
            <div class="stat-item"><span id="date-display">JAN 18</span><br>2026</div>
        </div>
    </header>

  <div class="theme-box">
    <h2 id="puzzle-title">LOADING...</h2>
    <p id="puzzle-hint" style="margin: 5px 0; color: #666; font-size: 14px;"></p>
    <div class="peek-status">PEEKS LEFT: <span id="peeks-left">3</span></div>
</div>

    <ul id="sortable-list"></ul>

    <div class="controls">
        <button id="submitBtn" class="action-btn" onclick="checkLadders()">SUBMIT RANKING</button>
        <button id="masterBtn" class="action-btn" onclick="showMaster()">VIEW CORRECT SOLUTION</button>
        <button id="shareBtn" class="action-btn" onclick="copyShareText()">SHARE RESULTS</button>
    </div>

    <script>
        const vault = [
              { title: "Military History (Victories)", task: "Least Victories âž” Most", type: "text", items: [
                {n: "Israel", r: 1, h: "~30"}, {n: "Egypt", r: 2, h: "~60"}, {n: "Prussia/Germany", r: 3, h: "~110"}, 
                {n: "Russia", r: 4, h: "~130"}, {n: "USA", r: 5, h: "~145"}, {n: "Rome", r: 6, h: "~160"}, 
                {n: "China", r: 7, h: "~170"}, {n: "Austria", r: 8, h: "~175"}, {n: "UK", r: 9, h: "~230"}, {n: "France", r: 10, h: "1,100+"}
            ]},
            { title: "Scrabble Base Points", task: "Lowest Base Score âž” Highest", type: "text", items: [
                {n: "Etiquette", r: 1, h: "18"}, {n: "Oxyptila", r: 2, h: "19"}, {n: "Bezique", r: 3, h: "26"}, 
                {n: "Zinkify", r: 4, h: "26"}, {n: "Juxtapose", r: 5, h: "27"}, {n: "Caziques", r: 6, h: "28"}, 
                {n: "Muzjiks", r: 7, h: "29"}, {n: "Oxazepam", r: 8, h: "29"}, {n: "Hydroxybenzene", r: 9, h: "30"}, {n: "Quizzical", r: 10, h: "38"}
            ]},
            { title: "Macbeth Chronology", task: "First Act âž” Last Act", type: "text", items: [
                {n: "Three Witches Meet", r: 1, h: "I.i"}, {n: "Execution of Cawdor", r: 2, h: "I.iv"}, {n: "Lady Macbeth's Letter", r: 3, h: "I.v"}, 
                {n: "The Floating Dagger", r: 4, h: "II.i"}, {n: "The King is Found", r: 5, h: "II.iii"}, {n: "Banquo's Ghost Appears", r: 6, h: "III.iv"}, 
                {n: "The Second Prophecies", r: 7, h: "IV.i"}, {n: "Sleepwalking Scene", r: 8, h: "V.i"}, {n: "Tomorrow and Tomorrow", r: 9, h: "V.v"}, {n: "Macduff's Victory", r: 10, h: "V.viii"}
            ]},
            { title: "Red Spectrum", task: "Lightest âž” Darkest", type: "color", items: [
                {n: "Misty Rose", r: 1, c: "#FFE4E1"}, {n: "Salmon", r: 2, c: "#FA8072"}, {n: "Coral", r: 3, c: "#FF7F50"}, 
                {n: "Tomato", r: 4, c: "#FF6347"}, {n: "Candy Apple", r: 5, c: "#FF0800"}, {n: "Ruby", r: 6, c: "#E0115F"}, 
                {n: "Firebrick", r: 7, c: "#B22222"}, {n: "Dark Red", r: 8, c: "#8B0000"}, {n: "Maroon", r: 9, c: "#800000"}, {n: "Oxblood", r: 10, c: "#4A0404"}
            ]},
            { title: "Blue Spectrum", task: "Lightest âž” Darkest", type: "color", items: [
                {n: "Alice Blue", r: 1, c: "#F0F8FF"}, {n: "Sky Blue", r: 2, c: "#87CEEB"}, {n: "Baby Blue", r: 3, c: "#89CFF0"}, 
                {n: "Cornflower", r: 4, c: "#6495ED"}, {n: "Steel Blue", r: 5, c: "#4682B4"}, {n: "Cobalt", r: 6, c: "#0047AB"}, 
                {n: "Royal Blue", r: 7, c: "#4169E1"}, {n: "Sapphire", r: 8, c: "#0F52BA"}, {n: "Navy Blue", r: 9, c: "#000080"}, {n: "Midnight Blue", r: 10, c: "#191970"}
            ]},
            { title: "Orchestral Scale (Instruments)", task: "Least No. of Instruments âž” Most", type: "text", items: [
                {n: "Mozart: Sym. No. 1", r: 1, h: "~15"}, {n: "Haydn: Sym. No. 94", r: 2, h: "~30"}, {n: "Beethoven: Sym. No. 5", r: 3, h: "~45"}, 
                {n: "Brahms: Sym. No. 4", r: 4, h: "~55"}, {n: "Tchaikovsky: Sym. No. 6", r: 5, h: "~70"}, {n: "Stravinsky: Rite of Spring", r: 6, h: "~90"}, 
                {n: "Mahler: Sym. No. 5", r: 7, h: "~100"}, {n: "Strauss: Alpine Sym.", r: 8, h: "125+"}, {n: "Baverstock: Sym. No. 1", r: 9, h: "200+"}, {n: "Mahler: Sym. No. 8", r: 10, h: "1000+"}
            ]},
            { title: "Victorian Book Sales", task: "Least Sales âž” Most", type: "text", items: [
                {n: "Elizabeth Gaskell", r: 1, h: "Lower"}, {n: "George Eliot", r: 2, h: "Mid-Low"}, {n: "Anthony Trollope", r: 3, h: "Mid-Low"}, 
                {n: "The BrontÃ«s", r: 4, h: "Mid"}, {n: "Thomas Hardy", r: 5, h: "Mid"}, {n: "Lewis Carroll", r: 6, h: "High"}, 
                {n: "H.G. Wells", r: 7, h: "High"}, {n: "R.L. Stevenson", r: 8, h: "V. High"}, {n: "Charles Dickens", r: 9, h: "Iconic"}, {n: "Conan Doyle", r: 10, h: "Elite"}
            ]}
        ];

        let peeks = 3;
        const launchDate = new Date("2026-01-18");
        const diffDays = Math.floor((new Date() - launchDate) / 86400000);
        const active = vault[diffDays % vault.length];

        function init() {
            document.getElementById('puzzle-title').innerText = active.title;
            // ADD THIS LINE:
    document.getElementById('puzzle-hint').innerText = active.task || "Drag to rank";
    
    document.getElementById('streak-count').innerText = localStorage.getItem('ladders_streak') || 0;
            document.getElementById('streak-count').innerText = localStorage.getItem('ladders_streak') || 0;
            const list = document.getElementById('sortable-list');
            [...active.items].sort(() => Math.random() - 0.5).forEach(item => {
                const colorHtml = active.type === 'color' ? `<div class="color-bar" style="background:${item.c}"></div>` : '';
                list.innerHTML += `<li class="item" draggable="true" data-rank="${item.r}">
                    ${colorHtml}
                    <div class="text-container">
                        <span class="name">${item.n}</span>
                        <span class="val-hint">${item.h || ''}</span>
                        <button class="peek-btn" onclick="doPeek(this)">PEEK</button>
                    </div>
                </li>`;
            });
            setupDraggables();
        }

        function doPeek(btn) {
            if (peeks > 0) {
                const item = btn.closest('.item');
                item.classList.add('peeked');
                if (active.type === 'text') item.querySelector('.val-hint').style.display = 'block';
                peeks--;
                document.getElementById('peeks-left').innerText = peeks;
                btn.style.display = 'none';
                setTimeout(() => {
                    if (!document.getElementById('submitBtn').disabled) {
                        item.classList.remove('peeked');
                        if (active.type === 'text') item.querySelector('.val-hint').style.display = 'none';
                        btn.style.display = 'block';
                    }
                }, 1500);
            }
        }

        function checkLadders() {
            const items = [...document.querySelectorAll('.item')];
            let score = 0;
            items.forEach((item, i) => {
                item.classList.add('solved');
                const correct = item.dataset.rank == (i + 1);
                if (correct) score++;
                item.style.borderLeft = `12px solid ${correct ? '#6aaa64' : '#ce3a3a'}`;
                item.querySelector('.val-hint').style.display = 'block';
                item.querySelector('.peek-btn').style.display = 'none';
                item.draggable = false;
            });
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('masterBtn').style.display = 'block';
            document.getElementById('shareBtn').style.display = 'block';
            window.finalScore = `${score}/${active.items.length}`;
            updateStreak(score === active.items.length);
        }

        function showMaster() {
            const list = document.getElementById('sortable-list');
            const items = [...document.querySelectorAll('.item')].sort((a,b) => a.dataset.rank - b.dataset.rank);
            list.innerHTML = '';
            items.forEach(i => list.appendChild(i));
        }

        function updateStreak(win) {
            let streak = parseInt(localStorage.getItem('ladders_streak')) || 0;
            const today = new Date().toISOString().split('T')[0];
            if (localStorage.getItem('ladders_last') !== today) {
                streak = win ? streak + 1 : 0;
                localStorage.setItem('ladders_streak', streak);
                localStorage.setItem('ladders_last', today);
                document.getElementById('streak-count').innerText = streak;
            }
        }

        function copyShareText() {
            const text = `LADDERS #${diffDays + 1}\nScore: ${window.finalScore}\nStreak: ${localStorage.getItem('ladders_streak')} ðŸ”¥\nhttps://your-github-link.io`;
            navigator.clipboard.writeText(text);
            alert("Results copied to clipboard!");
        }

        function setupDraggables() {
            const list = document.getElementById('sortable-list');
            let dragItem = null;
            list.addEventListener('dragstart', (e) => { dragItem = e.target; e.target.classList.add('dragging'); });
            list.addEventListener('dragover', (e) => {
                e.preventDefault();
                const afterElement = [...list.querySelectorAll('.item:not(.dragging)')].reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = e.clientY - box.top - box.height / 2;
                    return (offset < 0 && offset > closest.offset) ? { offset: offset, element: child } : closest;
                }, { offset: Number.NEGATIVE_INFINITY }).element;
                if (afterElement == null) list.appendChild(dragItem); else list.insertBefore(dragItem, afterElement);
            });
            list.addEventListener('dragend', (e) => e.target.classList.remove('dragging'));
        }
        init();
    </script>
</body>
</html>
