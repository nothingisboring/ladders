<!DOCTYPE html>
<html>
<head>
    <title>LADDERS | Daily Ranking Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* NYT-INSPIRED "LADDERS" THEME */
        :root { --correct: #6aaa64; --wrong: #ce3a3a; --border: #e2e2e2; --text: #000; }
        body { font-family: 'nyt-franklin', arial, sans-serif; background: #fff; color: var(--text); display: flex; flex-direction: column; align-items: center; padding: 20px; margin: 0; }
        
        header { width: 100%; max-width: 500px; border-bottom: 1px solid var(--border); padding: 10px 0; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-weight: 800; font-size: 24px; letter-spacing: -1px; }
        .stats { font-size: 12px; font-weight: bold; text-transform: uppercase; }

        .theme-box { text-align: center; margin-bottom: 25px; }
        .theme-box h2 { margin: 0; font-size: 18px; text-transform: uppercase; letter-spacing: 1px; }
        .theme-box p { margin: 5px 0; color: #666; font-size: 14px; }

        #sortable-list { list-style: none; padding: 0; width: 100%; max-width: 450px; border-top: 1px solid var(--border); }
        .item { 
            display: flex; align-items: center; padding: 15px 10px; background: #fff; 
            border-bottom: 1px solid var(--border); position: relative; cursor: grab; user-select: none;
        }
        .item.dragging { background: #f9f9f9; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        .data-bar { position: absolute; left: 0; top: 0; bottom: 0; width: 0%; background: #f0f0f0; transition: width 1s ease-out; z-index: 1; }
        .text-container { position: relative; z-index: 2; display: flex; width: 100%; align-items: center; }
        .name { font-weight: 500; }
        .val-hint { margin-left: auto; font-size: 12px; color: #888; visibility: hidden; }

        .controls { margin-top: 30px; display: flex; flex-direction: column; gap: 10px; width: 100%; max-width: 450px; }
        button { padding: 16px; border-radius: 30px; border: none; font-weight: bold; cursor: pointer; font-size: 16px; transition: 0.2s; }
        #submitBtn { background: #000; color: #fff; }
        #submitBtn:disabled { background: var(--border); color: #999; }
        #shareBtn { background: var(--correct); color: #fff; display: none; }
    </style>
</head>
<body>

    <header>
        <div class="logo">LADDERS</div>
        <div class="stats" id="date-display">JAN 18, 2026</div>
    </header>

    <div class="theme-box">
        <h2 id="puzzle-title">LOADING...</h2>
        <p id="puzzle-desc">Drag to rank from least to most.</p>
    </div>

    <ul id="sortable-list"></ul>

    <div class="controls">
        <button id="submitBtn" onclick="checkLadders()">SUBMIT RANKING</button>
        <button id="shareBtn" onclick="copyShareText()">SHARE RESULTS</button>
    </div>

    <script>
        // THE PUZZLE VAULT (All our previous work)
        const vault = [
            { title: "Scrabble Points", desc: "Lowest Base Score ➔ Highest", items: [
                {n: "Etiquette", r: 1, v: 10, h: "18 pts"}, {n: "Oxyptila", r: 2, v: 20, h: "19 pts"}, {n: "Bezique", r: 3, v: 30, h: "26 pts"}, {n: "Juxtapose", r: 4, v: 40, h: "27 pts"}, {n: "Caziques", r: 5, v: 50, h: "28 pts"}, {n: "Muzjiks", r: 6, v: 60, h: "29 pts"}, {n: "Oxazepam", r: 7, v: 70, h: "29 pts"}, {n: "Hydroxybenzene", r: 8, v: 80, h: "30 pts"}, {n: "Quizzical", r: 9, v: 90, h: "38 pts"}, {n: "Oxyphenbutazone", r: 10, v: 100, h: "41 pts"}
            ]},
            { title: "The 'The' Scale", desc: "Fewest 'the's ➔ Most", items: [
                {n: "Old Man & Sea", r: 1, v: 5, h: "1.2k"}, {n: "Gatsby", r: 2, v: 15, h: "3.2k"}, {n: "Alice in Wonderland", r: 3, v: 25, h: "3.4k"}, {n: "Tale of Two Cities", r: 4, v: 35, h: "7.5k"}, {n: "Moby Dick", r: 5, v: 45, h: "14k"}, {n: "Ulysses", r: 6, v: 55, h: "15k"}, {n: "Fellowship of Ring", r: 7, v: 65, h: "16.5k"}, {n: "War and Peace", r: 8, v: 80, h: "35k"}, {n: "Les Misérables", r: 9, v: 90, h: "38k"}, {n: "Search of Lost Time", r: 10, v: 100, h: "120k+"}
            ]},
            { title: "The Macbeth Arc", desc: "First Spoken ➔ Final Act", items: [
                {n: "When shall we three meet...", r: 1, v: 10}, {n: "Fair is foul...", r: 2, v: 20}, {n: "Stars, hide your fires...", r: 3, v: 30}, {n: "Look like the innocent flower...", r: 4, v: 40}, {n: "Is this a dagger...", r: 5, v: 50}, {n: "Neptune's ocean...", r: 6, v: 60}, {n: "Double, double toil...", r: 7, v: 70}, {n: "Out, damned spot!", r: 8, v: 80}, {n: "Tomorrow, and tomorrow...", r: 9, v: 90}, {n: "Lay on, Macduff!", r: 10, v: 100}
            ]}
        ];

        // ENGINE
        const launchDate = new Date("2026-01-18");
        const today = new Date();
        const diffDays = Math.floor((today - launchDate) / (1000 * 60 * 60 * 24));
        const activePuzzle = vault[diffDays % vault.length];

        function init() {
            document.getElementById('puzzle-title').innerText = activePuzzle.title;
            const list = document.getElementById('sortable-list');
            const shuffled = [...activePuzzle.items].sort(() => Math.random() - 0.5);
            shuffled.forEach(item => {
                list.innerHTML += `<li class="item" draggable="true" data-rank="${item.r}" data-val="${item.v}">
                    <div class="data-bar"></div>
                    <div class="text-container"><span class="name">${item.n}</span><span class="val-hint">${item.h || ''}</span></div>
                </li>`;
            });
            setupDraggables();
        }

        function setupDraggables() {
            const list = document.getElementById('sortable-list');
            let dragItem = null;
            list.addEventListener('dragstart', (e) => { dragItem = e.target; e.target.classList.add('dragging'); });
            list.addEventListener('dragend', (e) => { e.target.classList.remove('dragging'); });
            list.addEventListener('dragover', (e) => {
                e.preventDefault();
                const afterElement = [...list.querySelectorAll('.item:not(.dragging)')].reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = e.clientY - box.top - box.height / 2;
                    return (offset < 0 && offset > closest.offset) ? { offset: offset, element: child } : closest;
                }, { offset: Number.NEGATIVE_INFINITY }).element;
                if (afterElement == null) list.appendChild(dragItem);
                else list.insertBefore(dragItem, afterElement);
            });
        }

        function checkLadders() {
            const items = [...document.querySelectorAll('.item')];
            let correctCount = 0;
            items.forEach((item, idx) => {
                const isCorrect = item.dataset.rank == (idx + 1);
                if (isCorrect) correctCount++;
                item.querySelector('.data-bar').style.width = item.dataset.val + '%';
                item.style.borderLeft = isCorrect ? '8px solid var(--correct)' : '8px solid var(--wrong)';
                item.querySelector('.val-hint').style.visibility = 'visible';
                item.draggable = false;
            });
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('shareBtn').style.display = 'block';
            window.finalScore = `${correctCount}/10`;
        }

        function copyShareText() {
            const text = `LADDERS Puzzle #${diffDays + 1}\nScore: ${window.finalScore}\nhttps://yourname.github.io/ladders`;
            navigator.clipboard.writeText(text);
            alert("Results copied to clipboard!");
        }

        init();
    </script>
</body>
</html>
